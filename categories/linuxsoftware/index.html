<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <!-- SEO相关 -->
    
        
            <meta name="robots" content="noindex,follow">
        
    
    <!-- 渲染优化 -->
    <meta name="renderer" content="webkit">
    <meta name="force-rendering" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="HandheldFriendly" content="True">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

    <!-- 页面元数据 -->
    
    <title>
        分类：linuxsoftware -
        
        Syboot</title>
    
    

    <!-- feed -->
    
        <link rel="alternate" href="/atom.xml" title="Syboot" type="application/atom+xml">
    

    <!-- import meta -->
    
        
            <meta name='theme-color' content='#FFFFFF'>
        
            <meta name='msapplication-TileColor' content='#1BC3FB'>
        
            <meta name='msapplication-config' content='https://cdn.jsdelivr.net/gh/lxeridium/cdn/xml/browserconfig.xml'>
        
    

    <!-- link -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lxeridium/cdn/css/all.min.css">
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lxeridium/cdn/css/jquery.fancybox.min.css">


    
        
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lxeridium/cdn/css/waves.min.css">

    

    

    

    

    <!-- import link -->
    
        
            <link rel='shortcut icon' type='image/x-icon' href='https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/logo/favicon.ico'>
            <link rel='icon' type='image/x-icon' sizes='32x32' href='https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/logo/favicon.png'>
            <link rel='apple-touch-icon' type='image/png' sizes='180x180' href='https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/logo/apple-touch-icon.png'>
            <link rel='mask-icon' color='#1BC3FB' href='https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/logo/safari-pinned-tab.svg'>
            <link rel='manifest' href='https://cdn.jsdelivr.net/gh/lxeridium/cdn/site.webmanifest'>
    

    
    
        
<link rel="stylesheet" href="/css/style.css">

    

    <script>
        function setLoadingBarProgress(num) {
            document.getElementById('loading-bar').style.width = num + "%";
        }
    </script>

    
    
</head>

<body>

    <div class="cover-wrapper">
        
            <cover class='cover  half'>
                <div class='cover-body'>
    <div class='a'>
        
            <img class='logo' src='https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/logo/syboot_logo.png'/>
        
        
            <p class="title">syboot</p>
        
        
            <p class="subtitle">分享网洛资源代找资源，工具，书籍，文章，技术，以及日常的问题。感谢关注 @syboot  +Vx syboot </p>
        
    </div>
    <div class='b'>
        
            <div class="m_search">
                <form name="searchform" class="form u-search-form">
                    <input type="text" class="input u-search-input"
                           placeholder="search ......"/>
                    <i class="icon fas fa-search fa-fw"></i>
                </form>
            </div>
        
        <div class='menu navigation'>
            <ul class='cover-list-h'>
                
                    
                        <li>
                            <a class="nav home"
                               href="/docstarted/"
                            
                            
                               id="docstarted">
                                <i class='fas fa-book fa-fw'></i>
                                
                                
                            </a>
                        </li>
                    
                        <li>
                            <a class="nav home"
                               href="/archives/"
                            
                            
                               id="archives">
                                <i class='fas fa-rss fa-fw'></i>
                                
                                
                            </a>
                        </li>
                    
                        <li>
                            <a class="nav home"
                               href="/examples/"
                            
                            
                               id="examples">
                                <i class='fas fa-play-circle fa-fw'></i>
                                
                                
                            </a>
                        </li>
                    
                
            </ul>
        </div>
    </div>
</div>

            </cover>
        
        <div id="loading-bar-wrapper">
    <div id="loading-bar"></div>
</div>
<header class="l_header shadow floatable blur">
    <div class='container'>
        <div class='wrapper'>
            <div class='nav-sub'>
                <p class="title"></p>
                <ul class='switcher nav-list-h'>
                    <li><a class="s-comment fas fa-comments fa-fw" target="_self" href='javascript:void(0)'></a></li>
                    
                        <li><a class="s-toc fas fa-list fa-fw" target="_self" href='javascript:void(0)'></a></li>
                    
                </ul>
            </div>
            <div class="nav-main">
                
                    
                    <a class="title flat-box" target="_self" href='/'>
                        
                        
                        
                        
                            SYBOOT <b><sup
                                        style='color:#3AA757'>’</sup></b>
                        
                    </a>
                

                <div class='menu navigation'>
                    <ul class='nav-list-h'>
                        
                        
                        
                            
                            
                                <li>
                                    <a class="flat-box" href=/
                                    
                                    
                                    
                                       id="home"
                                            
                                    >
                                        
                                        home
                                    </a>
                                    
                                </li>
                            
                        
                        
                            
                            
                                <li>
                                    <a class="flat-box" href=/categories/
                                    
                                    
                                    
                                       id="categories"
                                            
                                    >
                                        
                                        category
                                    </a>
                                    
                                </li>
                            
                        
                        
                            
                            
                                <li>
                                    <a class="flat-box" href=/tags/
                                    
                                    
                                    
                                       id="tags"
                                            
                                    >
                                        
                                        tags
                                    </a>
                                    
                                </li>
                            
                        
                        
                            
                            
                                <li>
                                    <a class="flat-box" href=/archives/
                                    
                                    
                                    
                                       id="archives"
                                            
                                    >
                                        
                                        archives
                                    </a>
                                    
                                </li>
                            
                        
                        
                            
                            
                                <li>
                                    <a class="flat-box" href=/friends/
                                    
                                    
                                    
                                       id="friends"
                                            
                                    >
                                        
                                        link
                                    </a>
                                    
                                </li>
                            
                        
                        
                            
                            
                                <li>
                                    <a class="flat-box" href=/about/
                                    
                                    
                                    
                                       id="about"
                                            
                                    >
                                        
                                        about
                                    </a>
                                    
                                </li>
                            
                        
                        
                    </ul>
                </div>

                <div class="m_search">
                    <form name="searchform" class="form u-search-form">
                        <i class="icon fas fa-search fa-fw"></i>
                        <input type="text" class="input u-search-input"
                               placeholder="Search..."/>
                    </form>
                </div>

                <ul class='switcher nav-list-h'>
                    
                        <li><a class="s-search fas fa-search fa-fw" target="_self" href='javascript:void(0)'></a></li>
                    
                    <li>
                        <a class="s-menu fas fa-bars fa-fw" target="_self" href='javascript:void(0)'></a>
                        <ul class="menu-phone list-v navigation white-box">
                            
                                
                            
                                <li>
                                    <a class="flat-box" href=/
                                    
                                    
                                    
                                       id="home"
                                            
                                    >
                                        
                                        home
                                    </a>
                                    
                                </li>
                            
                        
                            
                                
                            
                                <li>
                                    <a class="flat-box" href=/categories/
                                    
                                    
                                    
                                       id="categories"
                                            
                                    >
                                        
                                        category
                                    </a>
                                    
                                </li>
                            
                        
                            
                                
                            
                                <li>
                                    <a class="flat-box" href=/tags/
                                    
                                    
                                    
                                       id="tags"
                                            
                                    >
                                        
                                        tags
                                    </a>
                                    
                                </li>
                            
                        
                            
                                
                            
                                <li>
                                    <a class="flat-box" href=/archives/
                                    
                                    
                                    
                                       id="archives"
                                            
                                    >
                                        
                                        archives
                                    </a>
                                    
                                </li>
                            
                        
                            
                                
                            
                                <li>
                                    <a class="flat-box" href=/friends/
                                    
                                    
                                    
                                       id="friends"
                                            
                                    >
                                        
                                        link
                                    </a>
                                    
                                </li>
                            
                        
                            
                                
                            
                                <li>
                                    <a class="flat-box" href=/about/
                                    
                                    
                                    
                                       id="about"
                                            
                                    >
                                        
                                        about
                                    </a>
                                    
                                </li>
                            
                        
                            
                        </ul>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</header>

<script>setLoadingBarProgress(40);</script>

    </div>


<div class="l_body">
    <div class='body-wrapper'>
        


<div class='l_main'>
    
        
            
    <section class="post-list ">
        
            
                
                    
                
                    
                
                    
                
                    
                
            
        
        
            
                
                    <div class='post-wrapper'>
                        <article class="post white-box shadow reveal ">
    


    <section class='meta'>
        
            
            
            <div class="meta" id="header-meta">
                
                    
    <h2 class="title">
        <a href="/posts/linuxsoftware/AppImage/3df5f004.html">
            linuxsoftware-AppImage
        </a>
    </h2>


                
                <div class='new-meta-box'>
                    
                        
                    
                        
                            
<div class='new-meta-item author'>
    <a href="http://lxeridium.github.io" rel="nofollow">
        <img src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/logo/sy512.png">
        <p>Syboot</p>
    </a>
</div>

                        
                    
                        
                            
    
    <div class='new-meta-item category'>
        <a href='/categories/linuxsoftware/AppImage/' rel="nofollow">
            <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
            <p>linuxsoftware/AppImage</p>
        </a>
    </div>


                        
                    
                        
                            <div class="new-meta-item date">
    <a class='notlink'>
        <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
        <p>发布于：2020年7月30日</p>
    </a>
</div>

                        
                    
                        
                            

                        
                    
                        
                            

                        
                    
                </div>
                
                    <hr>
                
            </div>
        
    </section>


    <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
            
                <h3 id="linux-AppImage-打包"><a href="#linux-AppImage-打包" class="headerlink" title="linux AppImage 打包"></a>linux AppImage 打包</h3><p>可执行的Linux应用打包方式</p>
<p>下载一个应用程序，给予运行权限，双击运行！无需安装！不需要改变依赖或系统配置。 使用AppImage格式分发Linux桌面应用程序，让所有常见发行版的用户运行它。 一次打包，到处运行。 覆盖所有主流桌面系统。</p>
<h3 id="如何运行AppImage"><a href="#如何运行AppImage" class="headerlink" title="如何运行AppImage?"></a>如何运行AppImage?</h3><p>运行一个Appimage应用，如此简单:</p>
<p>给予它运行权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ chmod a+x Subsurface*.AppImage</span><br></pre></td></tr></table></figure>

<p>然后直接运行！</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ./Subsurface*.AppImage</span><br></pre></td></tr></table></figure>

<p>非常简单.</p>
<h3 id="特点："><a href="#特点：" class="headerlink" title="特点："></a>特点：</h3><pre><code>简单.

AppImage的核心思想是一个应用程序 = 一个文件 。每个AppImage都包含应用程序以及应用程序运行所需的所有文件。换句话说，除了操作系统本身的基础组件，Appimage不需要依赖包即可运行。

可靠.

AppImage 格式是上游应用打包的理想选择，这意味着你可以直接从开发者那里获取软件，而不需要任何中间步骤，这完全符合开发者意图。非常迅速。

快速.

AppImage应用可以直接下载并且运行，无需安装，并且不需要root权限。</code></pre><h3 id="相关文档"><a href="#相关文档" class="headerlink" title="相关文档"></a>相关文档</h3><pre><code>https://docs.appimage.org/index.html</code></pre><h3 id="赞助广告"><a href="#赞助广告" class="headerlink" title="赞助广告"></a>赞助广告</h3><p><img src="https://gd3.alicdn.com/imgextra/i4/2200652270622/O1CN01JAQLRX1GSuy7uSs2Q_!!2200652270622.jpg" alt="秋冬欧美蓝白撞色条纹弹力打底衫"></p>
<p><a target="_blank" rel="noopener" href="https://item.taobao.com/item.htm?id=625058323217">查看购买上图商品</a> <a target="_blank" rel="noopener" href="https://shop252294542.taobao.com/">淘宝店铺</a> <a target="_blank" rel="noopener" href="http://www.lxeridium.com/">品牌官网</a></p>
<pre><code>感谢 lxeridium品牌赞助. 品牌官网：http://www.lxeridium.com </code></pre>
            
        </div>
        
            
        
    </section>
</article>

                    </div>
                
            
                
                    <div class='post-wrapper'>
                        <article class="post white-box shadow reveal ">
    


    <section class='meta'>
        
            
            
            <div class="meta" id="header-meta">
                
                    
    <h2 class="title">
        <a href="/posts/linuxsoftware/LVM/5828fa6f.html">
            linuxsoftware-LVM
        </a>
    </h2>


                
                <div class='new-meta-box'>
                    
                        
                    
                        
                            
<div class='new-meta-item author'>
    <a href="http://lxeridium.github.io" rel="nofollow">
        <img src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/logo/sy512.png">
        <p>Syboot</p>
    </a>
</div>

                        
                    
                        
                            
    
    <div class='new-meta-item category'>
        <a href='/categories/linuxsoftware/LVM/' rel="nofollow">
            <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
            <p>linuxsoftware/LVM</p>
        </a>
    </div>


                        
                    
                        
                            <div class="new-meta-item date">
    <a class='notlink'>
        <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
        <p>发布于：2020年6月30日</p>
    </a>
</div>

                        
                    
                        
                            

                        
                    
                        
                            

                        
                    
                </div>
                
                    <hr>
                
            </div>
        
    </section>


    <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
            
                <h3 id="linux-LVM-逻辑卷"><a href="#linux-LVM-逻辑卷" class="headerlink" title="linux LVM 逻辑卷"></a>linux LVM 逻辑卷</h3><p>LVM是一个磁盘管理子系统，它允许根据文件系统或原始数据的特定大小来分配磁盘空间。 LVM文件系统能够超出单盘的大小限制，这个特点被称之为跨磁盘。就是因为单个的文件系统能够跨多个磁盘，<br>所以使用LVM能够将多个磁盘合并到一个卷组中，卷组然后再被划为一个或多个逻辑卷。</p>
<p>优点</p>
<p>比起普通的硬盘分区管理方式，LVM更富于灵活性：</p>
<pre><code>将多块硬盘看作一块大硬盘
使用逻辑卷（LV），可以创建跨越众多硬盘空间的分区。
可以创建小的逻辑卷（LV），在空间不足时再动态调整它的大小。
在调整逻辑卷（LV）大小时可以不用考虑逻辑卷在硬盘上的位置，不用担心没有可用的连续空间。
可以在线（online）对逻辑卷（LV）和卷组（VG）进行创建、删除、调整大小等操作。不过LVM上的文件系统也需要重新调整大小，好在某些文件系统（例如ext4）也支持在线操作。
无需重新启动服务，就可以将服务中用到的逻辑卷（LV）在线（online）/动态（live）迁移至别的硬盘上。
允许创建快照，可以保存文件系统的备份，同时使服务的下线时间（downtime）降低到最小。
支持各种设备映射目标（device-mapper targets），包括透明文件系统加密和缓存常用数据（caching of frequently used data）。这将允许你创建一个包含一个或多个磁盘、并用LUKS加密的系统，使用LVM on top 可轻松地管理和调整这些独立的加密卷 （例如. /, /home, /backup等) 并免去开机时多次输入密钥的麻烦。</code></pre><p>缺点</p>
<pre><code>在系统设置时需要更复杂的额外步骤。
Windows系统并不支持LVM，若使用双系统，你将无法在Windows上访问LVM分区。</code></pre><h3 id="LVM-基础"><a href="#LVM-基础" class="headerlink" title="LVM 基础"></a>LVM 基础</h3><pre><code>物理卷PV -&gt; 卷组VG -&gt; 逻辑卷LV
PV 被组装成  VG  然后被分割为  LV</code></pre><h3 id="LVM-查找"><a href="#LVM-查找" class="headerlink" title="LVM 查找"></a>LVM 查找</h3><p>默认情况：LVM根据磁盘被添加到卷组中的顺序从LVM磁盘中找出可用的PE</p>
<h3 id="LVM-规则"><a href="#LVM-规则" class="headerlink" title="LVM 规则"></a>LVM 规则</h3><pre><code>1.一个磁盘必须专用于LVM.除了0扇区以外。
2.一个磁盘只能是一个卷组的成员。
3.不同接口的磁盘 会有不能一起混合使用。
4.卷组中逻辑卷的最大数量是255。  
5.每个PV中的最大PE数量是65,535。
6.每个卷组中的最大PV数量是255。
7.必须配置quorum， 为了激活卷组，卷组中超过一半的的磁盘必须为可用状态。</code></pre><h3 id="LVM-命令"><a href="#LVM-命令" class="headerlink" title="LVM 命令"></a>LVM 命令</h3><pre><code>   任务             PV         VG        LV
搜寻(scan)        pvscan     vgscan     lvscan
建立(create)      pvcreate   vgcreate   lvcreate
列出(display)     pvdisplay  vgdisplay  lvdisplay
增加(extend)                 vgextend   lvextend
减少(reduce)                 vgreduce   lvreduce
删除(remove)      pvremove   vgremove   lvremove
改变容量(resize)                         lvresize


激活         vgchange -a y 卷组名 
停用卷组       vgchange -a n 卷组名
强行停用卷组    vgchange -c n /dev/vgroot</code></pre><h3 id="LVM-结构创建"><a href="#LVM-结构创建" class="headerlink" title="LVM 结构创建"></a>LVM 结构创建</h3><pre><code>创建物理卷PV     #使用-f选项强制pvcreate在一个已经存在的PV上生成一个新的PV .</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># pvcreate   /dev/sda</span></span><br></pre></td></tr></table></figure>

<pre><code>创建卷组VG     </code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># vgcreate  vg01  /dev/sda  /dev/sdb</span></span><br></pre></td></tr></table></figure>

<pre><code>查看VG</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment"># vgdisplay vg01</span></span><br><span class="line">```    </span><br><span class="line"></span><br><span class="line">    添加PV     <span class="comment">#向已有 VG 中添加 PV</span></span><br><span class="line"></span><br><span class="line">```bash</span><br><span class="line">    　　<span class="comment"># vgextend vg01 /dev/hdc</span></span><br></pre></td></tr></table></figure>

<pre><code>创建逻辑卷    </code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># lvcreate -L 100 -n lv01 vg01 #        在卷组1上生成100M的逻辑卷.</span></span><br></pre></td></tr></table></figure>

<pre><code>创建文件系统</code></pre><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># mkfs -t reiserfs /dev/vg01/lv01  </span></span><br></pre></td></tr></table></figure>

<pre><code>查看LV</code></pre><pre><code class="bash"><span class="comment"># lvdisplay /dev/vg01/lv01</span></code></pre>
<pre><code>调整大小LV    #逻辑卷lv01扩大10GiB，并同时扩大其文件系统：    </code></pre><pre><code class="bash"><span class="comment"># lvresize -L +10G --resizefs vg01/lv01</span></code></pre>
<h3 id="赞助广告"><a href="#赞助广告" class="headerlink" title="赞助广告"></a>赞助广告</h3><p><img src="https://gd3.alicdn.com/imgextra/i4/2200652270622/O1CN01JAQLRX1GSuy7uSs2Q_!!2200652270622.jpg" alt="秋冬欧美蓝白撞色条纹弹力打底衫"></p>
<p><a target="_blank" rel="noopener" href="https://item.taobao.com/item.htm?id=625058323217">查看购买上图商品</a> <a target="_blank" rel="noopener" href="https://shop252294542.taobao.com/">淘宝店铺</a> <a target="_blank" rel="noopener" href="http://www.lxeridium.com/">品牌官网</a></p>
<pre><code>感谢 lxeridium品牌赞助. 品牌官网：http://www.lxeridium.com </code></pre>
            
        </div>
        
            
        
    </section>
</article>

                    </div>
                
            
                
                    <div class='post-wrapper'>
                        <article class="post white-box shadow reveal ">
    


    <section class='meta'>
        
            
            
            <div class="meta" id="header-meta">
                
                    
    <h2 class="title">
        <a href="/posts/linuxsoftware/tomcat/e2199e29.html">
            linuxsoftware-tomcat
        </a>
    </h2>


                
                <div class='new-meta-box'>
                    
                        
                    
                        
                            
<div class='new-meta-item author'>
    <a href="http://lxeridium.github.io" rel="nofollow">
        <img src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/logo/sy512.png">
        <p>Syboot</p>
    </a>
</div>

                        
                    
                        
                            
    
    <div class='new-meta-item category'>
        <a href='/categories/linuxsoftware/tomcat/' rel="nofollow">
            <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
            <p>linuxsoftware/tomcat</p>
        </a>
    </div>


                        
                    
                        
                            <div class="new-meta-item date">
    <a class='notlink'>
        <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
        <p>发布于：2020年6月29日</p>
    </a>
</div>

                        
                    
                        
                            

                        
                    
                        
                            

                        
                    
                </div>
                
                    <hr>
                
            </div>
        
    </section>


    <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
            
                <h3 id="linux-apache-tomcat-9-0-40"><a href="#linux-apache-tomcat-9-0-40" class="headerlink" title="linux apache-tomcat-9.0.40"></a>linux apache-tomcat-9.0.40</h3><p>Tomcat是Apache 软件基金会（Apache Software Foundation）的Jakarta 项目中的一个核心项目，由Apache、Sun 和其他一些公司及个人共同开发而成。由于有了Sun<br>的参与和支持，最新的Servlet 和JSP 规范总是能在Tomcat 中得到体现， 因为Tomcat 技术先进、性能稳定，而且免费，因而深受Java 爱好者的喜爱并得到了部分软件开发商的认可，成为目前比较流行的Web 应用服务器。</p>
<h3 id="添加专用用户"><a href="#添加专用用户" class="headerlink" title="添加专用用户"></a>添加专用用户</h3><p>添加一个新用户，用来跑tomcat, 为了后期好管理，形成良好的习惯。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useradd admin</span><br><span class="line"><span class="built_in">echo</span> admin:新密码|chpasswd</span><br><span class="line">chmod 755 /home/admin</span><br></pre></td></tr></table></figure>

<p>如果有跳板机需要修改文件/etc/security/access.conf 下边代码加在access.conf 文件尾部。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+:admin:跳板机IP</span><br></pre></td></tr></table></figure>

<h3 id="安装JDK"><a href="#安装JDK" class="headerlink" title="安装JDK"></a>安装JDK</h3><p>JDK 是一种用于构建在 Java 平台上发布的应用程序、Applet 和组件的开发环境，即编写 Java 程序必须使用 JDK，它提供了编译和运行 Java 程序的环境。</p>
<p>我这里下载 gz 包方便后期 复制移植用。 包名 jdk-15.0.1_linux-x64_bin.tar.gz</p>
<p>JAVA 安装目录 JAVAHOME=/usr/java 没有目录就创建。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cp jdk-15.0.1_linux-x64_bin.tar.gz  /usr/java/</span><br><span class="line"><span class="built_in">cd</span> /usr/java</span><br><span class="line">tar zxf jdk-15.0.1_linux-x64_bin.tar.gz</span><br><span class="line">rm -f  jdk-15.0.1_linux-x64_bin.tar.gz</span><br><span class="line">chown root.root /usr/java/ -R</span><br><span class="line">/usr/java/jdk-15.0.1/bin/java -version  <span class="comment">#查看版本</span></span><br></pre></td></tr></table></figure>

<p><a target="_blank" rel="noopener" href="https://www.oracle.com/java/technologies/javase-jdk15-downloads.html">JDK15 下载页面</a></p>
<h3 id="添加和修改环境变量"><a href="#添加和修改环境变量" class="headerlink" title="添加和修改环境变量"></a>添加和修改环境变量</h3><p>在admin 家目录下添加一个 .bash_profile 用来声明JDK变量 文件内容如下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">cat  /home/admin/.bash_profile</span><br><span class="line"></span><br><span class="line"><span class="comment"># .bash_profile</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the aliases and functions</span></span><br><span class="line"><span class="keyword">if</span> [ -f ~/.bashrc ]; <span class="keyword">then</span></span><br><span class="line">        . ~/.bashrc</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># User specific environment and startup programs</span></span><br><span class="line">PATH=/usr/java/jdk-15.0.1/bin:<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/bin</span><br><span class="line"><span class="built_in">export</span> PATH</span><br><span class="line"><span class="built_in">export</span> JAVA_HOME=/usr/java/jdk-15.0.1</span><br><span class="line"><span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar:<span class="variable">$CLASSPATH</span></span><br><span class="line">LANG=en_US.UTF-8</span><br><span class="line"><span class="built_in">unset</span> USERNAME</span><br></pre></td></tr></table></figure>

<p>修改 limits.conf 内容如下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt;/etc/security/limits.conf&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">$USERS       hard    nofile           1024000</span></span><br><span class="line"><span class="string">$USERS       soft    nofile           1024000</span></span><br><span class="line"><span class="string">$USERS       hard    nproc            102400</span></span><br><span class="line"><span class="string">$USERS       soft    nproc            102400</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>

<h3 id="安装apache-tomcat-9-0-40"><a href="#安装apache-tomcat-9-0-40" class="headerlink" title="安装apache-tomcat-9.0.40"></a>安装apache-tomcat-9.0.40</h3><p>1.下载安装包 apache-tomcat-9.0.40.tar.gz 到 /home/admin/ 下。</p>
<p><a target="_blank" rel="noopener" href="https://tomcat.apache.org/download-90.cgi">tomcat9.0 下载页面</a></p>
<p>解压 apache-tomcat-9.0.40.tar.gz 到当前目录。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"> ln -s apache-tomcat-9.0.40  apache-tomcat</span><br><span class="line">ls /home/admin/</span><br><span class="line"></span><br><span class="line">apache-tomcat</span><br><span class="line">apache-tomcat-9.0.40</span><br><span class="line">logs</span><br></pre></td></tr></table></figure>

<p>2.修改 apache-tomcat-9.0.40/bin/catalina.sh 在注释下方， 约125行处添加。以下代码。没有装APR的可以删除 “-D java.library.path=/usr/local/apr/lib”<br>这段。gc 选项是为了崩溃后排查用。</p>
<pre><code>JAVA_OPTS=&apos;-server -Xms4096m -Xmx4096m -Xss256k -XX:+HeapDumpOnOutOfMemoryError -Djava.library.path=/usr/local/apr/lib -verbose:gc -XX:+PrintGCDetails -XX:+PrintGCTimeStamps -Xloggc:/home/admin/logs/gc.log&apos;</code></pre><p>3.添加启动选项 init.d 下添加文件，内容如下。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/init.d/tomcat_admin</span><br><span class="line"></span><br><span class="line">    <span class="comment">#!/bin/bash</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Startup script for the tomcat</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># chkconfig: 345 95 15</span></span><br><span class="line">    <span class="comment"># description: tomcat service script</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="comment"># Source function library.</span></span><br><span class="line">    . /etc/rc.d/init.d/<span class="built_in">functions</span></span><br><span class="line">    </span><br><span class="line">    TOMCAT_HOME=/home/admin/apache-tomcat</span><br><span class="line">    USER=admin</span><br><span class="line">    UIDS=`id -u <span class="variable">$USER</span>`</span><br><span class="line">    RETVAL=0</span><br><span class="line">    PORT=8080</span><br><span class="line">    PROG=tomcat</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">checkjava</span></span>()&#123;</span><br><span class="line">        <span class="keyword">if</span> [ -z <span class="string">&quot;<span class="variable">$JAVA_HOME</span>&quot;</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">export</span> JAVA_HOME=/usr/java/jdk-15.0.1</span><br><span class="line">        <span class="built_in">export</span> CLASSPATH=.:<span class="variable">$JAVA_HOME</span>/lib/dt.jar:<span class="variable">$JAVA_HOME</span>/lib/tools.jar:<span class="variable">$CLASSPATH</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">checkrun</span></span>()&#123;</span><br><span class="line">        ps aux --width=1000 | grep <span class="string">&quot;[o]rg.apache.catalina.startup.Bootstrap start&quot;</span> \</span><br><span class="line">                           | egrep <span class="string">&quot;<span class="variable">$USER</span>&quot;</span> | awk <span class="string">&#x27;&#123;printf $2 &quot; &quot;&#125;&#x27;</span> \</span><br><span class="line">                           | wc | awk <span class="string">&#x27;&#123;print $2&#125;&#x27;</span> &gt;/tmp/tomcat_process_count.txt</span><br><span class="line">        <span class="built_in">read</span> line &lt; /tmp/tomcat_process_count.txt</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$line</span> -gt 0 ]; <span class="keyword">then</span></span><br><span class="line">            RETVAL=1</span><br><span class="line">                <span class="built_in">return</span> <span class="variable">$RETVAL</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            RETVAL=0</span><br><span class="line">            <span class="built_in">return</span> <span class="variable">$RETVAL</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">start</span></span>()&#123;</span><br><span class="line">        checkjava</span><br><span class="line">        checkrun</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$RETVAL</span> -eq 0 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> -n <span class="string">&quot;Starting <span class="variable">$PROG</span>&quot;</span></span><br><span class="line">            su - <span class="variable">$USER</span> -c <span class="string">&quot;<span class="variable">$TOMCAT_HOME</span>/bin/startup.sh&quot;</span> &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">            RETVAL=$?</span><br><span class="line">                usleep 100000</span><br><span class="line">                [ <span class="variable">$RETVAL</span> -ne 0 ] &amp;&amp; failure $<span class="string">&quot;<span class="variable">$PROG</span> startup&quot;</span></span><br><span class="line">                [ <span class="variable">$RETVAL</span> -eq 0 ] &amp;&amp; touch /var/lock/subsys/<span class="variable">$PROG</span> &amp;&amp; success $<span class="string">&quot;<span class="variable">$PROG</span> startup&quot;</span></span><br><span class="line">                <span class="built_in">echo</span></span><br><span class="line">            <span class="built_in">return</span> <span class="variable">$RETVAL</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$PROG</span> already running&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">stop</span></span>()&#123;</span><br><span class="line">        checkjava</span><br><span class="line">        checkrun</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$RETVAL</span> -eq 1 ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> -n <span class="string">&quot;Shutting down tomcat&quot;</span></span><br><span class="line">            su - <span class="variable">$USER</span> -c <span class="string">&quot;<span class="variable">$TOMCAT_HOME</span>/bin/shutdown.sh&quot;</span> &gt;/dev/null 2&gt;&amp;1</span><br><span class="line">            <span class="keyword">while</span> [ <span class="variable">$RETVAL</span> -eq 1 ]; <span class="keyword">do</span></span><br><span class="line">            sleep 5</span><br><span class="line">                PIDS=$(ps aux --width=1000 | grep <span class="string">&quot;org.apache.catalina.startup.Bootstrap start&quot;</span> \</span><br><span class="line">                           | egrep <span class="string">&quot;<span class="variable">$USER</span>&quot;</span> | awk <span class="string">&#x27;&#123;printf $2 &quot; &quot;&#125;&#x27;</span>)</span><br><span class="line">            <span class="built_in">kill</span> -9 <span class="variable">$PIDS</span></span><br><span class="line">            checkrun</span><br><span class="line">            <span class="keyword">done</span></span><br><span class="line">            RETVAL=$?</span><br><span class="line">                usleep 100000</span><br><span class="line">                [ <span class="variable">$RETVAL</span> -ne 0 ] &amp;&amp; failure $<span class="string">&quot;<span class="variable">$PROG</span> stop&quot;</span></span><br><span class="line">                [ <span class="variable">$RETVAL</span> -eq 0 ] &amp;&amp; rm -f /var/lock/subsys/<span class="variable">$PROG</span> &amp;&amp; success $<span class="string">&quot;<span class="variable">$PROG</span> stop&quot;</span></span><br><span class="line">                <span class="built_in">echo</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">&quot;<span class="variable">$PROG</span> is not running&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="title">status</span></span>()&#123;</span><br><span class="line">        checkrun</span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$RETVAL</span> -eq 1 ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> -n <span class="string">&quot;Tomcat ( pid &quot;</span></span><br><span class="line">        ps aux --width=1000 | grep <span class="string">&quot;org.apache.catalina.startup.Bootstrap start&quot;</span> | egrep <span class="string">&quot;<span class="variable">$USER</span>&quot;</span> | awk <span class="string">&#x27;&#123;printf $2 &quot; &quot;&#125;&#x27;</span></span><br><span class="line">        <span class="built_in">echo</span> -n <span class="string">&quot;) is running...&quot;</span></span><br><span class="line">        <span class="built_in">echo</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Tomcat is stopped&quot;</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;---------------------------------------------&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;<span class="variable">$1</span>&quot;</span> <span class="keyword">in</span></span><br><span class="line">        start)</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">        stop)</span><br><span class="line">        stop</span><br><span class="line">        ;;</span><br><span class="line">        restart)</span><br><span class="line">        stop</span><br><span class="line">        start</span><br><span class="line">        ;;</span><br><span class="line">        status)</span><br><span class="line">        status</span><br><span class="line">        ;;</span><br><span class="line">        *)</span><br><span class="line">        <span class="built_in">echo</span> <span class="string">&quot;Usage: <span class="variable">$0</span> &#123;start|stop|restart|status&#125;&quot;</span></span><br><span class="line">    <span class="keyword">esac</span></span><br><span class="line">    <span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure>

<p>然后修改权限</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod  +x  /etc/init.d/tomcat_admin</span><br></pre></td></tr></table></figure>

<p>4.修改 tomcat 主配置文件 server.xml</p>
<p>将源文件里的2处内容替换为新的。 第一处源内容：</p>
<pre><code>&lt;Connector port=&quot;8080&quot; protocol=&quot;HTTP/1.1&quot;
           connectionTimeout=&quot;20000&quot;
           redirectPort=&quot;8443&quot; /&gt;</code></pre><p>替换内容：</p>
<pre><code>APR 模式下的替换配置
&lt;Connector executor=&quot;tomcatThreadPool&quot; port=&quot;8080&quot; protocol=&quot;org.apache.coyote.http11.Http11AprProtocol&quot; enableLookups=&quot;false&quot; maxThreads=&quot;800&quot; acceptCount=&quot;800&quot; acceptorThreadCount=&quot;2&quot; connectionTimeout=&quot;6000&quot; redirectPort=&quot;8443&quot; compression=&quot;on&quot; maxKeepAliveRequests=&quot;1&quot;/&gt;

NIO 模式下的替换配置
&lt;Connector executor=&quot;tomcatThreadPool&quot; port=&quot;8080&quot; protocol=&quot;org.apache.coyote.http11.Http11NioProtocol&quot; enableLookups=&quot;false&quot; maxThreads=&quot;800&quot; acceptCount=&quot;800&quot; acceptorThreadCount=&quot;2&quot; connectionTimeout=&quot;6000&quot; redirectPort=&quot;8443&quot; compression=&quot;on&quot; maxKeepAliveRequests=&quot;1&quot;/&gt;</code></pre><p>9.0以后的协议处理类：</p>
<pre><code>org.apache.coyote.http11.Http11NioProtocol：对应非阻塞 IO
org.apache.coyote.http11.Http11Nio2Protocol：对应异步 IO
org.apache.coyote.http2.Http2Protocol：对应 http2 协议
org.apache.coyote.http11.Http11AprProtocol 对应 APR 从操作系统级别来解决异步的IO问题,大幅度的提高性能。 </code></pre><p>logs 格式的替换 第二处源内容：</p>
<pre><code>&lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;logs&quot;
       prefix=&quot;localhost_access_log&quot; suffix=&quot;.txt&quot;
       pattern=&quot;%h %l %u %t &amp;quot;%r&amp;quot; %s %b&quot; /&gt;</code></pre><p>替换内容：</p>
<pre><code>&lt;Valve className=&quot;org.apache.catalina.valves.AccessLogValve&quot; directory=&quot;$&#123;user.home&#125;/logs&quot;
   prefix=&quot;ip.access.log.&quot; suffix=&quot;&quot; buffered=&quot;false&quot;
   pattern=&quot;%&#123;X-Forwarded-For&#125;i %&#123;CLIENT_IP&#125;i %l %u %t %T %r %s %b &apos;%&#123;Referer&#125;i&apos; %&#123;User-Agent&#125;i&quot; /&gt;</code></pre><h3 id="APR-的安装"><a href="#APR-的安装" class="headerlink" title="APR 的安装"></a>APR 的安装</h3><p>APR （Apache Portable Runtime (APR) based Native library for Tomcat）</p>
<p>Tomcat可以使用Apache Portable Runtime提供出色的可伸缩性，性能以及与本机服务器技术的更好集成。 Apache可移植运行时是一个高度可移植的库，它是Apache HTTP Server 2.x的核心。<br>APR有许多用途，包括访问高级IO功能（例如sendfile，epoll和OpenSSL），操作系统级别的功能（生成随机数，系统状态等）和本机进程处理（共享内存，NT管道和Unix套接字）。<br>这些功能使Tomcat成为通用的Web服务器，可以更好地与其他本机Web技术集成，并且从总体上使Java作为完整的Web服务器平台而不是仅以后端为中心的技术更加可行。</p>
<p>1.安装需要三个基础APR包。 分别为：</p>
<pre><code>apr-x.x.x
apr-util-x.x.x
apr-iconv-x.x.x</code></pre><p>三个包的版本需要匹配，否则安装失败。新手三个包建议 用yum apt dnf 这类工具来安装。</p>
<p>编译安装:</p>
<p>cd apr-x.x.x</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">./configure;make;make install</span><br><span class="line"><span class="built_in">echo</span> <span class="string">&quot;/usr/local/apr/lib&quot;</span> &gt;&gt; /etc/ld.so.conf</span><br></pre></td></tr></table></figure>

<p>cd apr-util-x.x.x</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --with-apr=/usr/<span class="built_in">local</span>/apr;make;make install</span><br></pre></td></tr></table></figure>

<p>cd apr-iconv-x.x.x</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --with-apr=/usr/<span class="built_in">local</span>/apr;make;make install</span><br></pre></td></tr></table></figure>

<p>查看配置</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ldconfig</span><br></pre></td></tr></table></figure>

<p>2.apache-tomcat-9.0.40 中安装 tomcat-native组件</p>
<p>cd /home/admin/apache-tomcat/bin/</p>
<p>tar zvf tomcat-native.tar.gz</p>
<p>cd tomcat-native-1.2.25-src</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./configure --with-apr=/usr/<span class="built_in">local</span>/apr --with-java-home=/usr/java/jdk-15.0.1;make;make install</span><br></pre></td></tr></table></figure>

<p>装好了APR， server.xml 中才可以启用APR配置。</p>
<h3 id="启动tomcat"><a href="#启动tomcat" class="headerlink" title="启动tomcat"></a>启动tomcat</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service tomcat_admin start</span><br></pre></td></tr></table></figure>

<h3 id="赞助广告"><a href="#赞助广告" class="headerlink" title="赞助广告"></a>赞助广告</h3><p><img src="https://gd3.alicdn.com/imgextra/i4/2200652270622/O1CN01JAQLRX1GSuy7uSs2Q_!!2200652270622.jpg" alt="秋冬欧美蓝白撞色条纹弹力打底衫"></p>
<p><a target="_blank" rel="noopener" href="https://item.taobao.com/item.htm?id=625058323217">查看购买上图商品</a> <a target="_blank" rel="noopener" href="https://shop252294542.taobao.com/">淘宝店铺</a> <a target="_blank" rel="noopener" href="http://www.lxeridium.com/">品牌官网</a></p>
<pre><code>感谢 lxeridium品牌赞助. 品牌官网：http://www.lxeridium.com </code></pre>
            
        </div>
        
            
        
    </section>
</article>

                    </div>
                
            
                
                    <div class='post-wrapper'>
                        <article class="post white-box shadow reveal ">
    


    <section class='meta'>
        
            
            
            <div class="meta" id="header-meta">
                
                    
    <h2 class="title">
        <a href="/posts/linuxsoftware/ansible/630074e3.html">
            linuxsoftware-ansible
        </a>
    </h2>


                
                <div class='new-meta-box'>
                    
                        
                    
                        
                            
<div class='new-meta-item author'>
    <a href="http://lxeridium.github.io" rel="nofollow">
        <img src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/logo/sy512.png">
        <p>Syboot</p>
    </a>
</div>

                        
                    
                        
                            
    
    <div class='new-meta-item category'>
        <a href='/categories/linuxsoftware/ansible/' rel="nofollow">
            <i class="fas fa-folder-open fa-fw" aria-hidden="true"></i>
            <p>linuxsoftware/ansible</p>
        </a>
    </div>


                        
                    
                        
                            <div class="new-meta-item date">
    <a class='notlink'>
        <i class="fas fa-calendar-alt fa-fw" aria-hidden="true"></i>
        <p>发布于：2020年6月19日</p>
    </a>
</div>

                        
                    
                        
                            

                        
                    
                        
                            

                        
                    
                </div>
                
                    <hr>
                
            </div>
        
    </section>


    <section class="article typo">
        <div class="article-entry" itemprop="articleBody">
            
                <h3 id="linux-ansible"><a href="#linux-ansible" class="headerlink" title="linux ansible"></a>linux ansible</h3><p>在IT部门工作，您可能会一遍又一遍地执行相同的任务。如果您可以一次解决问题，然后自动化运行解决方案该多好。 有了Ansible-简单而强大的IT自动化引擎，成千上万的公司正在使用它来降低环境的复杂性并加快DevOps计划的实施。</p>
<p>ansible 特点</p>
<pre><code>部署简单，只需在主控端部署Ansible环境，被控端无需做任何操作；
默认使用SSH协议对设备进行管理；
有大量常规运维操作模块，可实现日常绝大部分操作；
配置简单、功能强大、扩展性强；
支持API及自定义模块，可通过Python轻松扩展；
通过Playbooks来定制强大的配置、状态管理；
轻量级，无需在客户端安装agent，更新时，只需在操作机上进行一次更新即可；
提供一个功能强大、操作性强的Web管理界面AWX平台。</code></pre><p><a target="_blank" rel="noopener" href="https://github.com/ansible/awx">AWX 下载页面</a></p>
<p>ansible 命令集</p>
<pre><code>/usr/bin/ansible　　Ansibe AD-Hoc 临时命令执行工具，常用于临时命令的执行
/usr/bin/ansible-doc 　　Ansible 模块功能查看工具
/usr/bin/ansible-galaxy　　下载/上传优秀代码或Roles模块 的官网平台，基于网络的
/usr/bin/ansible-playbook　　Ansible 定制自动化的任务集编排工具
/usr/bin/ansible-pull　　Ansible远程执行命令的工具，拉取配置而非推送配置（使用较少，海量机器时使用，对运维的架构能力要求较高）
/usr/bin/ansible-vault　　Ansible 文件加密工具
/usr/bin/ansible-console　　Ansible基于Linux Consoble界面可与用户交互的命令执行工具</code></pre><h4 id="install-ansible-管理机"><a href="#install-ansible-管理机" class="headerlink" title="install ansible 管理机"></a>install ansible 管理机</h4><p>通过Yum/dnf安装RPMs适用于Fedora发行版.</p>
<p>托管节点的操作系统版本可以是更早的版本, 但必须安装 Python 2.4 或更高版本的Python.</p>
<p>Fedora 用户可直接安装Ansible, 但RHEL或CentOS用户,需要 配置 EPEL 源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install the epel-release RPM if needed on CentOS, RHEL, or Scientific Linux</span></span><br><span class="line">$ sudo yum install ansible</span><br></pre></td></tr></table></figure>

<p>你也可以自己创建RPM软件包.在Ansible项目的checkout的根目录下,或是在一个tarball中,使用 make rpm 命令创建RPM软件包. 然后可分发这个软件包或是使用它来安装Ansible.在创建之前,先确定你已安装了<br>rpm-build, make, and python2-devel 基础包.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">clone</span> git://github.com/ansible/ansible.git</span><br><span class="line">$ <span class="built_in">cd</span> ./ansible</span><br><span class="line">$ make rpm</span><br><span class="line">$ sudo rpm -Uvh ~/rpmbuild/ansible-*.noarch.rpm</span><br></pre></td></tr></table></figure>

<p>其他安装方法不阐述，自行研究。</p>
<h4 id="ansible-前期配置"><a href="#ansible-前期配置" class="headerlink" title="ansible 前期配置"></a>ansible 前期配置</h4><p>在我们开始前要先理解Ansible是如何通过SSH与远程服务器连接是很重要的.</p>
<p>主机要授权于管理机的ssh 登录，并且配置免密码登录主机。你的public SSH key必须在这些主机系统的<code>authorized_keys</code>中才可以免密码。</p>
<p>ansible 主配置文件所在目录/etc/ansible/，进入该目录下可看到有如下文件</p>
<p>[root@ansible ansible]# ll total 24 -rw-r–r–. 1 root root 19179 Jan 29 2018 ansible.cfg -rw-r–r–. 1 root root 1016<br>Jan 29 2018 hosts drwxr-xr-x. 2 root root 6 Jan 29 2018 roles</p>
<pre><code>ansible.cfg： ansible 的主配置文件
hosts： 主机清单，即 intentory 清单
roles：ansible 角色</code></pre><p>查看主配置文件（/etc/ansible/ansible.cfg）默认内容如下：</p>
<pre><code>[defaults]
roles_path    = /etc/ansible/roles:/usr/share/ansible/roles
[inventory]
[privilege_escalation]
[paramiko_connection]
[ssh_connection]
[persistent_connection]
[accelerate]
[selinux]
[colors]
[diff]</code></pre><p>Ansible的一些的设置可以通过配置文件完成.在大多数场景下默认的配置就能满足大多数用户的需求,在一些特殊场景下,用户还是需要自行修改这些配置文件</p>
<p>用户可以修改一下配置文件来修改设置,他们的被读取的顺序如下:</p>
<pre><code>* ANSIBLE_CONFIG (一个环境变量)
* ansible.cfg (位于当前目录中)
* .ansible.cfg (位于家目录中)
* /etc/ansible/ansible.cfg</code></pre><h4 id="ansible-命令详解"><a href="#ansible-命令详解" class="headerlink" title="ansible 命令详解"></a>ansible 命令详解</h4><p>命令的具体格式如下：</p>
<p>ansible <host-pattern> [-f forks] [-m module_name] [-a args]</p>
<p>也可以通过ansible -h来查看帮助，下面我们列出一些比较常用的选项，并解释其含义：</p>
<pre><code>-a MODULE_ARGS　　　#模块的参数，如果执行默认COMMAND的模块，即是命令参数，如： “date”，“pwd”等等
-k，--ask-pass    #ask for SSH password。登录密码，提示输入SSH密码而不是假设基于密钥的验证
--ask-su-pass    #ask for su password。su切换密码
-K，--ask-sudo-pass    #ask for sudo password。提示密码使用sudo，sudo表示提权操作
--ask-vault-pass    #ask for vault password。假设我们设定了加密的密码，则用该选项进行访问
-B SECONDS    #后台运行超时时间
-C    #模拟运行环境并进行预运行，可以进行查错测试
-c CONNECTION    #连接类型使用
-f FORKS    #并行任务数，默认为5
-i INVENTORY    #指定主机清单的路径，默认为/etc/ansible/hosts
--list-hosts    #查看有哪些主机组
-m MODULE_NAME    #执行模块的名字，默认使用 command 模块，所以如果是只执行单一命令可以不用 -m参数
-o    #压缩输出，尝试将所有结果在一行输出，一般针对收集工具使用
-S    #用 su 命令
-R SU_USER    #指定 su 的用户，默认为 root 用户
-s    #用 sudo 命令
-U SUDO_USER    #指定 sudo 到哪个用户，默认为 root 用户
-T TIMEOUT    #指定 ssh 默认超时时间，默认为10s，也可在配置文件中修改
-u REMOTE_USER    #远程用户，默认为 root 用户
-v    #查看详细信息，同时支持-vvv，-vvvv可查看更详细信息</code></pre><h4 id="ansible-常用模块"><a href="#ansible-常用模块" class="headerlink" title="ansible 常用模块"></a>ansible 常用模块</h4><pre><code>-m 后面跟的就是 模块名称

ansible web -m ping
ansible web -m command -a &apos;ps -ef&apos;
ansible web -m shell -a &apos;cat /etc/passwd |grep &quot;root&quot;&apos;
ansible web -m file -a &apos;path=/data/app state=directory&apos;
ansible web -m fetch -a &apos;src=/data/hello dest=/data&apos;  
ansible web -m cron -a &apos;name=&quot;ntp update every 5 min&quot; minute=*/5 job=&quot;/sbin/ntpdate 172.17.0.1 &amp;&gt; /dev/null&quot;
ansible web -m yum -a &apos;name=htop state=present&apos;
ansible web -m service -a &apos;name=nginx state=started enabled=true&apos; 
ansible web -m user -a &apos;name=keer uid=11111&apos;
ansible web -m group -a &apos;name=sanguo gid=12222&apos;
ansible web -m script -a &apos;/tmp/df.sh&apos;
ansible web -m setup -a &apos;filter=&quot;*mem*&quot;&apos;    #查看内存</code></pre><h4 id="主机和主机组配置"><a href="#主机和主机组配置" class="headerlink" title="主机和主机组配置"></a>主机和主机组配置</h4><p>Ansible需呀一个配置主机的列表文件,编辑(或创建)/etc/ansible/hosts 并在其中加入一个或多个远程主机.</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">cat /etc/ansible/hosts</span><br><span class="line">192.168.1.50</span><br><span class="line">192.168.1.51</span><br><span class="line">192.168.1.52</span><br><span class="line">aserver.example.org</span><br><span class="line">bserver.example.org</span><br></pre></td></tr></table></figure>

<h5 id="主机与组"><a href="#主机与组" class="headerlink" title="主机与组"></a>主机与组</h5><p>/etc/ansible/hosts 文件的格式与windows的ini配置文件类似,组名用“[]”括起来下边的主机就是这个组内的主机。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mail.example.com</span><br><span class="line">[webservers]</span><br><span class="line">foo.example.com</span><br><span class="line">bar.example.com</span><br><span class="line">[dbservers]</span><br><span class="line">one.example.com</span><br><span class="line">two.example.com</span><br><span class="line">three.example.com</span><br></pre></td></tr></table></figure>

<p>一组相似的 hostname , 可简写如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[webservers]</span><br><span class="line">www[1:50].example.com</span><br></pre></td></tr></table></figure>

<h5 id="主机与组的变量"><a href="#主机与组的变量" class="headerlink" title="主机与组的变量"></a>主机与组的变量</h5><p>分配变量给主机，变量定义后可在 playbooks 中使用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[atlanta]</span><br><span class="line">host1 http_port=80 maxRequestsPerChild=808</span><br><span class="line">host2 http_port=303 maxRequestsPerChild=909</span><br></pre></td></tr></table></figure>

<p>组的变量,定义属于整个组的变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[atlanta]</span><br><span class="line">host1</span><br><span class="line">host2</span><br><span class="line"></span><br><span class="line">[atlanta:vars]</span><br><span class="line">ntp_server=ntp.atlanta.example.com</span><br><span class="line">proxy=proxy.atlanta.example.com</span><br></pre></td></tr></table></figure>

<h4 id="临时命令简介"><a href="#临时命令简介" class="headerlink" title="临时命令简介"></a>临时命令简介</h4><p>Introduction To Ad-Hoc Commands （临时命令简介）</p>
<p>所谓 ad-hoc 命令是什么呢? 如果我们敲入一些命令去比较快地完成一些事情,而不需要将这些执行的命令特别保存下来, 这样的命令就叫做 ad-hoc 命令.</p>
<p>举一个例子</p>
<p>这里我们要使用 Ansible 的命令行工具来重启 Atlanta 组中所有的 web 服务器,每次重启10个.</p>
<p>我们先设置 SSH-agent,将私钥纳入其管理:</p>
<p>$ ssh-agent bash $ ssh-add ~/.ssh/id_rsa</p>
<p>如果不想使用 ssh-agent, 想通过密码验证的方式使用 SSH,可以在执行ansible命令时使用 –ask-pass (-k)选项, 但这里建议使用 ssh-agent.</p>
<p>现在执行如下命令,这个命令中,atlanta是一个组,这个组里面有很多服务器,”/sbin/reboot”命令会在atlanta组下 的所有机器上执行. 这里ssh-agent会fork出10个子进程(bash)<br>,以并行的方式执行reboot命令.如前所说“每次重启10个” 即是以这种方式实现:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ansible atlanta -a <span class="string">&quot;/sbin/reboot&quot;</span> -f 10</span><br></pre></td></tr></table></figure>

<p>如果想通过 sudo 去执行命令,如下:</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ ansible atlanta -a <span class="string">&quot;/usr/bin/foo&quot;</span> -u username --sudo [--ask-sudo-pass]</span><br></pre></td></tr></table></figure>

<h3 id="赞助广告"><a href="#赞助广告" class="headerlink" title="赞助广告"></a>赞助广告</h3><p><img src="https://gd3.alicdn.com/imgextra/i4/2200652270622/O1CN01JAQLRX1GSuy7uSs2Q_!!2200652270622.jpg" alt="秋冬欧美蓝白撞色条纹弹力打底衫"></p>
<p><a target="_blank" rel="noopener" href="https://item.taobao.com/item.htm?id=625058323217">查看购买上图商品</a> <a target="_blank" rel="noopener" href="https://shop252294542.taobao.com/">淘宝店铺</a> <a target="_blank" rel="noopener" href="http://www.lxeridium.com/">品牌官网</a></p>
<pre><code>感谢 lxeridium品牌赞助. 品牌官网：http://www.lxeridium.com </code></pre>
            
        </div>
        
            
        
    </section>
</article>

                    </div>
                
            
        
    </section>
    
        
        <!-- 根据主题中的设置决定是否在archive中针对摘要部分的MathJax公式加载mathjax.js文件 -->
        
        

    


        
    

</div>
<aside class='l_side'>
    
    
        
        

<section class="widget blogger shadow desktop mobile">
    <div class='content'>
        
            
                <a class='avatar flat-box' href='/about/'>
                    <img no-lazy src='https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/logo/sy512.png'/>
                </a>
            
        
        
        
            <div class="social-wrapper">
                
                    
                        <a href="/atom.xml"
                           class="social fas fa-rss flat-btn"
                           target="_blank"
                           rel="external nofollow noopener noreferrer">
                        </a>
                    
                
                    
                        <a href="mailto:atgf0127@gmail.com"
                           class="social fas fa-envelope flat-btn"
                           target="_blank"
                           rel="external nofollow noopener noreferrer">
                        </a>
                    
                
                    
                        <a href="https://github.com/lxeridium"
                           class="social fab fa-github flat-btn"
                           target="_blank"
                           rel="external nofollow noopener noreferrer">
                        </a>
                    
                
            </div>
        
    </div>
</section>

    

    
        
        
    

    <section class="widget category shadow desktop mobile">
        
    <header>
        
            <a href='/categories/'><i class="fas fa-folder-open fa-fw" aria-hidden="true"></i><span
                        class='name'>category</span></a>
        
    </header>


        <div class='content'>
            <ul class="entry navigation">
                
                    <li><a class="flat-box"
                           title="/categories/English/" href="/categories/English/"
                           id="categoriesEnglish"
                        >
                            <div class='name'>English</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/English/%E8%87%AA%E7%84%B6%E6%8B%BC%E8%AF%BB%E6%B3%95/" href="/categories/English/%E8%87%AA%E7%84%B6%E6%8B%BC%E8%AF%BB%E6%B3%95/"
                           id="categoriesEnglishE887AAE784B6E68BBCE8AFBBE6B395"
                        >
                            <div class='name'>自然拼读法</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box"
                           title="/categories/linux/" href="/categories/linux/"
                           id="categorieslinux"
                        >
                            <div class='name'>linux</div>
                            <div class='badge'>(21)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linux/centos/" href="/categories/linux/centos/"
                           id="categorieslinuxcentos"
                        >
                            <div class='name'>centos</div>
                            <div class='badge'>(3)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linux/cmd/" href="/categories/linux/cmd/"
                           id="categorieslinuxcmd"
                        >
                            <div class='name'>cmd</div>
                            <div class='badge'>(5)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linux/configure/" href="/categories/linux/configure/"
                           id="categorieslinuxconfigure"
                        >
                            <div class='name'>configure</div>
                            <div class='badge'>(2)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linux/opensuse/" href="/categories/linux/opensuse/"
                           id="categorieslinuxopensuse"
                        >
                            <div class='name'>opensuse</div>
                            <div class='badge'>(3)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linux/software/" href="/categories/linux/software/"
                           id="categorieslinuxsoftware"
                        >
                            <div class='name'>software</div>
                            <div class='badge'>(5)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linux/system/" href="/categories/linux/system/"
                           id="categorieslinuxsystem"
                        >
                            <div class='name'>system</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linux/ubuntu/" href="/categories/linux/ubuntu/"
                           id="categorieslinuxubuntu"
                        >
                            <div class='name'>ubuntu</div>
                            <div class='badge'>(2)</div>
                        </a></li>
                
                    <li><a class="flat-box"
                           title="/categories/linuxsoftware/" href="/categories/linuxsoftware/"
                           id="categorieslinuxsoftware"
                        >
                            <div class='name'>linuxsoftware</div>
                            <div class='badge'>(4)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linuxsoftware/AppImage/" href="/categories/linuxsoftware/AppImage/"
                           id="categorieslinuxsoftwareAppImage"
                        >
                            <div class='name'>AppImage</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linuxsoftware/LVM/" href="/categories/linuxsoftware/LVM/"
                           id="categorieslinuxsoftwareLVM"
                        >
                            <div class='name'>LVM</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linuxsoftware/ansible/" href="/categories/linuxsoftware/ansible/"
                           id="categorieslinuxsoftwareansible"
                        >
                            <div class='name'>ansible</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/linuxsoftware/tomcat/" href="/categories/linuxsoftware/tomcat/"
                           id="categorieslinuxsoftwaretomcat"
                        >
                            <div class='name'>tomcat</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box"
                           title="/categories/systools/" href="/categories/systools/"
                           id="categoriessystools"
                        >
                            <div class='name'>systools</div>
                            <div class='badge'>(4)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/systools/Docker-Desktop/" href="/categories/systools/Docker-Desktop/"
                           id="categoriessystoolsDocker-Desktop"
                        >
                            <div class='name'>Docker-Desktop</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/systools/Proxmox-ve/" href="/categories/systools/Proxmox-ve/"
                           id="categoriessystoolsProxmox-ve"
                        >
                            <div class='name'>Proxmox-ve</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/systools/VMware-player/" href="/categories/systools/VMware-player/"
                           id="categoriessystoolsVMware-player"
                        >
                            <div class='name'>VMware-player</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/systools/virtualbox/" href="/categories/systools/virtualbox/"
                           id="categoriessystoolsvirtualbox"
                        >
                            <div class='name'>virtualbox</div>
                            <div class='badge'>(1)</div>
                        </a></li>
                
                    <li><a class="flat-box"
                           title="/categories/windows/" href="/categories/windows/"
                           id="categorieswindows"
                        >
                            <div class='name'>windows</div>
                            <div class='badge'>(3)</div>
                        </a></li>
                
                    <li><a class="flat-box child"
                           title="/categories/windows/tools/" href="/categories/windows/tools/"
                           id="categorieswindowstools"
                        >
                            <div class='name'>tools</div>
                            <div class='badge'>(3)</div>
                        </a></li>
                
            </ul>
        </div>
    </section>


    

    
        
        
    

    <section class="widget tagcloud shadow desktop mobile">
        
    <header>
        
            <a href='/tags/'><i class="fas fa-tags fa-fw" aria-hidden="true"></i><span
                        class='name'>tags</span></a>
        
    </header>


        <div class='content'>
            <a href="/tags/AppImage/" style="font-size: 14px; color: #999">AppImage</a> <a href="/tags/Docker-Desktop/" style="font-size: 14px; color: #999">Docker-Desktop</a> <a href="/tags/LVM/" style="font-size: 14px; color: #999">LVM</a> <a href="/tags/Proxmox-ve/" style="font-size: 14px; color: #999">Proxmox-ve</a> <a href="/tags/VMware-player/" style="font-size: 14px; color: #999">VMware-player</a> <a href="/tags/ansible/" style="font-size: 14px; color: #999">ansible</a> <a href="/tags/centos/" style="font-size: 19px; color: #777">centos</a> <a href="/tags/cmd/" style="font-size: 21.5px; color: #666">cmd</a> <a href="/tags/configure/" style="font-size: 16.5px; color: #888">configure</a> <a href="/tags/linux/" style="font-size: 24px; color: #555">linux</a> <a href="/tags/opensuse/" style="font-size: 19px; color: #777">opensuse</a> <a href="/tags/software/" style="font-size: 21.5px; color: #666">software</a> <a href="/tags/system/" style="font-size: 14px; color: #999">system</a> <a href="/tags/tomcat/" style="font-size: 14px; color: #999">tomcat</a> <a href="/tags/ubuntu/" style="font-size: 16.5px; color: #888">ubuntu</a> <a href="/tags/virtualbox/" style="font-size: 14px; color: #999">virtualbox</a> <a href="/tags/windows/" style="font-size: 19px; color: #777">windows</a> <a href="/tags/yast2/" style="font-size: 14px; color: #999">yast2</a> <a href="/tags/%E8%87%AA%E7%84%B6%E6%8B%BC%E8%AF%BB%E6%B3%95/" style="font-size: 14px; color: #999">自然拼读法</a>
        </div>
    </section>


    

    


</aside>


    
    <footer class="clearfix">
        <!--    <br><br>-->
        
            
                <!--        <br>-->
                <div class="social-wrapper">
                    
                        
                            <a href="/atom.xml"
                               class="social fas fa-rss flat-btn"
                               target="_blank"
                               rel="external nofollow noopener noreferrer">
                            </a>
                        
                    
                        
                            <a href="mailto:atgf0127@gmail.com"
                               class="social fas fa-envelope flat-btn"
                               target="_blank"
                               rel="external nofollow noopener noreferrer">
                            </a>
                        
                    
                        
                            <a href="https://github.com/lxeridium"
                               class="social fab fa-github flat-btn"
                               target="_blank"
                               rel="external nofollow noopener noreferrer">
                            </a>
                        
                    
                </div>
            
        
            
                <div><p>本博客所有文章转载请注明出处！</p>
</div>
            <!--      
        
            -->
            <!--        footer.use-->
            <!--        <a href="/" target="_blank" class="codename">Syboot</a>-->
            <!--        footer.theme-->
            <!--          -->
            <!--      
        
            -->
            <div class='copyright'>
                <p><a href="https://lxeridium.github.io">Copyright © 2017-2020 lxeridium</a></p>

            </div>
            
        
    </footer>

<script>setLoadingBarProgress(80);</script>


        <script>setLoadingBarProgress(60);</script>
    </div>
    <a class="s-top fas fa-arrow-up fa-fw" href='javascript:void(0)'></a>
</div>

<script src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/js/jquery.min.js"></script>


    <script>
        
        var SEARCH_SERVICE = "hexo" || "hexo";
        var ROOT = "/" || "/";
        if (!ROOT.endsWith('/')) ROOT += '/';
    </script>


    <script async src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/js/instant_page.js" type="module" defer
            integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>


    <script src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/js/scrollreveal.min.js"></script>
    <script type="text/javascript">
        $(function () {
            ScrollReveal().reveal('.l_main .reveal', {
                distance: '8px',
                duration: '800',
                interval: '100',
                scale: '1'
            });
        });
    </script>


    
<script src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/js/waves.min.js"></script>

    <script type="text/javascript">
        $(function () {
            Waves.attach('.flat-btn', ['waves-button']);
            Waves.attach('.float-btn', ['waves-button', 'waves-float']);
            Waves.attach('.float-btn-light', ['waves-button', 'waves-float', 'waves-light']);
            Waves.attach('.flat-box', ['waves-block']);
            Waves.attach('.float-box', ['waves-block', 'waves-float']);
            Waves.attach('.waves-image');
            Waves.init();
        });
    </script>




    
    
    
        
<script src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/js/jquery.backstretch.min.js"></script>

        <script type="text/javascript">
            $(function () {
                var imgs =["https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/wallpaper/aradfghj-ixwFncpyi-65.jpg", "https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/wallpaper/uihjgv-ixwFncpyi-5432.jpg", "https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/wallpaper/rtyuihj-ixwFncpyi-275.jpg", "https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/wallpaper/rtghhgy-ixwFncpyi-3523.jpg", "https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/wallpaper/iuhgr-ixwFncpyi-24487.jpg", "https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/wallpaper/ertfghj-ixwFncpyi-121.jpg", "https://cdn.jsdelivr.net/gh/lxeridium/cdn/img/wallpaper/wszoihji-xwFncpyi-dfghtr-784.jpg"];
                if ('true' == 'true') {
                    function shuffle(arr) {
                        /*From countercurrent-time*/
                        var n = arr.length;
                        while (n--) {
                            var index = Math.floor(Math.random() * n);
                            var temp = arr[index];
                            arr[index] = arr[n];
                            arr[n] = temp;
                        }
                    }

                    shuffle(imgs);
                }
                if ('.cover') {
                    $('.cover').backstretch(
                        imgs,
                        {
                            duration: "20000",
                            fade: "1500"
                        });
                } else {
                    $.backstretch(
                        imgs,
                        {
                            duration: "20000",
                            fade: "1500"
                        });
                }
            });
        </script>
    














    
<script src="/js/app.js"></script>



    
<script src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/js/search.js"></script>



    
<script src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/js/comment_typing.js"></script>






<!-- 复制 -->

    <script src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/js/clipboard.min.js"></script>
<script>
    function wait(callback, seconds) {
        var timelag = null;
        timelag = window.setTimeout(callback, seconds);
    }

    !function (e, t, a) {
        var initCopyCode = function () {
            var copyHtml = '';
            copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
            copyHtml += '<i class="fas fa-copy"></i><span>COPY</span>';
            copyHtml += '</button>';
            $(".highlight .code pre").before(copyHtml);
            $(".article pre code").before(copyHtml);
            var clipboard = new ClipboardJS('.btn-copy', {
                target: function (trigger) {
                    return trigger.nextElementSibling;
                }
            });
            clipboard.on('success', function (e) {
                let $btn = $(e.trigger);
                $btn.addClass('copied');
                let $icon = $($btn.find('i'));
                $icon.removeClass('fa-copy');
                $icon.addClass('fa-check-circle');
                let $span = $($btn.find('span'));
                $span[0].innerText = 'COPIED';

                wait(function () { // 等待两秒钟后恢复
                    $icon.removeClass('fa-check-circle');
                    $icon.addClass('fa-copy');
                    $span[0].innerText = 'COPY';
                }, 2000);
            });
            clipboard.on('error', function (e) {
                e.clearSelection();
                let $btn = $(e.trigger);
                $btn.addClass('copy-failed');
                let $icon = $($btn.find('i'));
                $icon.removeClass('fa-copy');
                $icon.addClass('fa-times-circle');
                let $span = $($btn.find('span'));
                $span[0].innerText = 'COPY FAILED';

                wait(function () { // 等待两秒钟后恢复
                    $icon.removeClass('fa-times-circle');
                    $icon.addClass('fa-copy');
                    $span[0].innerText = 'COPY';
                }, 2000);
            });
        }
        initCopyCode();
    }(window, document);
</script>




<!-- fancybox -->
<script src="https://cdn.jsdelivr.net/gh/lxeridium/cdn/js/jquery.fancybox.min.js"></script>
<script>
    function pjax_fancybox() {
        $(".article-entry").find("img").not('.inline').not('a img').each(function () { //渲染 fancybox
            var element = document.createElement("a"); // a 标签
            $(element).attr("pjax-fancybox", "");  // 过滤 pjax
            $(element).attr("href", $(this).attr("src"));
            if ($(this).attr("data-original")) {
                $(element).attr("href", $(this).attr("data-original"));
            }
            $(element).attr("data-fancybox", "images");
            var caption = "";   // 描述信息
            if ($(this).attr('alt')) {  // 标准 markdown 描述信息
                $(element).attr('data-caption', $(this).attr('alt'));
                caption = $(this).attr('alt');
            }
            var div = document.createElement("div");
            $(div).addClass("fancybox");
            $(this).wrap(div); // 最外层套 div ，其实主要作用还是 class 样式
            var span = document.createElement("span");
            $(span).addClass("image-caption");
            $(span).text(caption); // 加描述
            $(this).after(span);  // 再套一层描述
            $(this).wrap(element);  // 最后套 a 标签
        })
        $(".article-entry").find("img").fancybox({
            selector: '[data-fancybox="images"]',
            hash: false,
            loop: false,
            closeClick: true,
            helpers: {
                overlay: {closeClick: true}
            },
            buttons: [
                "zoom",
                "close"
            ]
        });
    };
    $(function () {
        pjax_fancybox();
    });
</script>





<script>setLoadingBarProgress(100);</script>
</body>
</html>
